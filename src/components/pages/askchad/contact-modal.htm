<!-- =========================
Contact Us Modal
===========================-->
<div
  id="contact-modal"
  class="fixed inset-0 z-[999] hidden items-center justify-center bg-black/50 backdrop-blur-sm"
>
  <div
    class="relative bg-white dark:bg-background-8 rounded-2xl shadow-2xl max-w-2xl w-full mx-4 my-8 flex flex-col"
  >
    <!-- Close Button -->
    <button
      id="close-contact-modal"
      class="absolute top-4 right-4 size-10 rounded-full flex items-center justify-center bg-stroke-2 dark:bg-background-6 hover:bg-stroke-3 dark:hover:bg-background-7 transition-colors z-10"
      aria-label="Close modal"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="2"
        stroke="currentColor"
        class="size-5 text-secondary dark:text-accent"
      >
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>

    <!-- Modal Content -->
    <div class="p-8 max-h-[calc(100vh-64px)] overflow-y-auto">
      <!-- Logo -->
      <figure class="max-w-[240px] mb-6">
        <img src="./images/askchad/logo-colored.png" alt="AskChad" class="w-full" />
      </figure>

      <p class="text-secondary/70 dark:text-accent/70 mb-6">
        Fill out the form below and we'll get back to you shortly.
      </p>

      <form id="contact-form" class="space-y-4">
        <!-- Name Field -->
        <div>
          <label for="contact-name" class="block text-sm font-medium text-secondary dark:text-accent mb-2">
            Name <span class="text-red-500">*</span>
          </label>
          <input
            type="text"
            id="contact-name"
            name="name"
            required
            class="w-full px-4 py-3 rounded-lg border border-stroke-3 dark:border-stroke-7 bg-white dark:bg-background-6 text-secondary dark:text-accent placeholder:text-secondary/50 dark:placeholder:text-accent/50 focus:outline-none focus:ring-2 focus:ring-primary dark:focus:ring-accent transition-all"
            placeholder="Enter your full name"
          />
        </div>

        <!-- Email Field -->
        <div>
          <label for="contact-email" class="block text-sm font-medium text-secondary dark:text-accent mb-2">
            Email <span class="text-red-500">*</span>
          </label>
          <input
            type="email"
            id="contact-email"
            name="email"
            required
            class="w-full px-4 py-3 rounded-lg border border-stroke-3 dark:border-stroke-7 bg-white dark:bg-background-6 text-secondary dark:text-accent placeholder:text-secondary/50 dark:placeholder:text-accent/50 focus:outline-none focus:ring-2 focus:ring-primary dark:focus:ring-accent transition-all"
            placeholder="Enter your email address"
          />
        </div>

        <!-- Phone Field -->
        <div>
          <label for="contact-phone" class="block text-sm font-medium text-secondary dark:text-accent mb-2">
            Phone Number
          </label>
          <input
            type="tel"
            id="contact-phone"
            name="phone"
            class="w-full px-4 py-3 rounded-lg border border-stroke-3 dark:border-stroke-7 bg-white dark:bg-background-6 text-secondary dark:text-accent placeholder:text-secondary/50 dark:placeholder:text-accent/50 focus:outline-none focus:ring-2 focus:ring-primary dark:focus:ring-accent transition-all"
            placeholder="(555) 123-4567"
          />
        </div>

        <!-- Marketing SMS Consent Checkbox -->
        <div class="flex items-start gap-3">
          <input
            type="checkbox"
            id="sms-marketing-consent"
            name="sms_marketing_consent"
            class="mt-1 size-5 rounded border-stroke-3 dark:border-stroke-7 text-primary dark:text-accent focus:ring-2 focus:ring-primary dark:focus:ring-accent cursor-pointer"
          />
          <label for="sms-marketing-consent" class="text-sm text-secondary/80 dark:text-accent/80 cursor-pointer">
            I agree to receive automated marketing text messages from AskChad at the phone number provided. Message frequency varies. Message & data rates may apply. Reply HELP for help, STOP to end.
          </label>
        </div>

        <!-- Transactional SMS Consent Checkbox -->
        <div class="flex items-start gap-3">
          <input
            type="checkbox"
            id="sms-transactional-consent"
            name="sms_transactional_consent"
            class="mt-1 size-5 rounded border-stroke-3 dark:border-stroke-7 text-primary dark:text-accent focus:ring-2 focus:ring-primary dark:focus:ring-accent cursor-pointer"
          />
          <label for="sms-transactional-consent" class="text-sm text-secondary/80 dark:text-accent/80 cursor-pointer">
            I agree to receive automated transactional and service-based text messages from AskChad at the phone number provided. Message frequency varies. Message & data rates may apply. Reply HELP for help, STOP to end.
          </label>
        </div>

        <!-- Privacy Policy and Terms Links -->
        <div class="text-xs text-secondary/60 dark:text-accent/60">
          By submitting this form, you agree to our
          <a href="/privacy.html" target="_blank" rel="noopener noreferrer" class="text-primary dark:text-accent hover:underline">Privacy Policy</a>
          and
          <a href="/tos.html" target="_blank" rel="noopener noreferrer" class="text-primary dark:text-accent hover:underline">Terms of Service</a>.
        </div>

        <!-- Submit Button -->
        <button
          type="submit"
          class="w-full btn bg-primary text-white hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 px-6 py-3 rounded-lg font-semibold transition-all duration-300 shadow-lg hover:shadow-xl"
        >
          Send Message
        </button>
      </form>

      <!-- Success Message (Hidden by default) -->
      <div id="contact-success" class="hidden mt-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg">
        <p class="text-green-700 dark:text-green-400 font-medium">
          Thank you! Your message has been sent successfully.
        </p>
      </div>
    </div>
  </div>
</div>

<script>
  // Contact Modal Management
  (function() {
    const modal = document.getElementById('contact-modal');
    const openButtons = document.querySelectorAll('.open-contact-modal');
    const closeButton = document.getElementById('close-contact-modal');
    const form = document.getElementById('contact-form');
    const successMessage = document.getElementById('contact-success');

    // Open modal
    openButtons.forEach(button => {
      button.addEventListener('click', (e) => {
        e.preventDefault();
        modal.classList.remove('hidden');
        modal.classList.add('flex');
        document.body.style.overflow = 'hidden';
      });
    });

    // Close modal
    function closeModal() {
      modal.classList.add('hidden');
      modal.classList.remove('flex');
      document.body.style.overflow = '';
      form.reset();
      successMessage.classList.add('hidden');
    }

    closeButton.addEventListener('click', closeModal);

    // Close on backdrop click
    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        closeModal();
      }
    });

    // Close on ESC key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
        closeModal();
      }
    });

    // Form submission
    form.addEventListener('submit', (e) => {
      e.preventDefault();

      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());

      // Here you would typically send the data to your backend
      console.log('Form submitted:', data);

      // Show success message
      form.classList.add('hidden');
      successMessage.classList.remove('hidden');

      // Reset form and close modal after 3 seconds
      setTimeout(() => {
        closeModal();
        form.classList.remove('hidden');
      }, 3000);
    });
  })();
</script>
